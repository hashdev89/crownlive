#!/bin/bash
# KOKO Payment Order Creation - CURL Generator
# First run: php test_koko_order.php
# Then use the output to create this curl command

# Replace these values with actual output from test_koko_order.php
MERCHANT_ID="95d2a4277cc39434353924821c23ac4c"
API_KEY="3jR7Sa2ET98NTtcFu5LotCm6Ok6UzZdE"
AMOUNT="1000.00"
CURRENCY="LKR"
ORDER_ID="TEST-12345"
REFERENCE="${MERCHANT_ID}123-${ORDER_ID}"
RETURN_URL="https://yourdomain.com/koko/success"
CANCEL_URL="https://yourdomain.com/koko/cancel"
RESPONSE_URL="https://yourdomain.com/koko/response"
FIRST_NAME="John"
LAST_NAME="Doe"
EMAIL="john.doe@example.com"
MOBILE="0771234567"
DESCRIPTION="Bagisto Order"
PLUGIN_NAME="customapi"
PLUGIN_VERSION="1.0.1"

# These must be generated by the PHP script
DATA_STRING="REPLACE_WITH_DATA_STRING_FROM_PHP_SCRIPT"
SIGNATURE="REPLACE_WITH_SIGNATURE_FROM_PHP_SCRIPT"

echo "=== KOKO Payment CURL Command ==="
echo ""
echo "curl -X POST 'https://prodapi.paykoko.com/api/merchants/orderCreate' \\"
echo "  -H 'Content-Type: application/x-www-form-urlencoded' \\"
echo "  -d '_mId=${MERCHANT_ID}' \\"
echo "  -d 'api_key=${API_KEY}' \\"
echo "  -d 'merchantPluginDetail={\"pluginName\":\"${PLUGIN_NAME}\",\"pluginVersion\":\"${PLUGIN_VERSION}\"}' \\"
echo "  -d '_returnUrl=${RETURN_URL}' \\"
echo "  -d '_cancelUrl=${CANCEL_URL}' \\"
echo "  -d '_responseUrl=${RESPONSE_URL}' \\"
echo "  -d '_amount=${AMOUNT}' \\"
echo "  -d '_currency=${CURRENCY}' \\"
echo "  -d '_reference=${REFERENCE}' \\"
echo "  -d '_orderId=${ORDER_ID}' \\"
echo "  -d '_pluginName=${PLUGIN_NAME}' \\"
echo "  -d '_pluginVersion=${PLUGIN_VERSION}' \\"
echo "  -d '_description=${DESCRIPTION}' \\"
echo "  -d '_firstName=${FIRST_NAME}' \\"
echo "  -d '_lastName=${LAST_NAME}' \\"
echo "  -d '_email=${EMAIL}' \\"
echo "  -d '_mobileNumber=${MOBILE}' \\"
echo "  -d 'dataString=${DATA_STRING}' \\"
echo "  -d 'signature=${SIGNATURE}'"
echo ""
echo "=== Note ==="
echo "Run test_koko_order.php first to get the DATA_STRING and SIGNATURE values"
echo "Then replace them in this script and run again"

